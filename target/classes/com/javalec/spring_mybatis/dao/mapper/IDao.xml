<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.javalec.spring_mybatis.dao.IDao">
	<select id="listDao" resultType="com.javalec.spring_mybatis.dto.BDto">
		SELECT * FROM BOARD order by bId desc
	</select>
	
	<select id="contentViewBDao" resultType="com.javalec.spring_mybatis.dto.BDto">
		SELECT * FROM BOARD where bId = #{bId}
	</select>
	
	
	<insert id="writeBDao">
		insert into board (bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent) 
		
		values (mvc_board_seq.nextval,#{bName},#{bTitle},#{bContent},0,mvc_board_seq.currval,0,0)
	</insert>
	
	<delete id="deleteDao">
	
	</delete>
	
	<insert id="insertMDao">
    	INSERT INTO member

        (mid , memail, mdate, mcoin)

        SELECT #{mId}, #{mEmail}, to_date(sysdate,'yyyy.mm.dd hh24:mi'), 500 FROM DUAL

        WHERE NOT EXISTS (

                        SELECT 0

                        FROM member

                        WHERE mid = #{mId}

                        )
	</insert>
</mapper>
